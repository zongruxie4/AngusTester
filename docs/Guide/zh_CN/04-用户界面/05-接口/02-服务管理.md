[//]: # (服务管理)

[//]: # (=====)

通过AngusTester的服务管理功能，团队可以高效地管理API服务及其接口，实现更好的资源复用和服务质量保障。希望本产品文档能够帮助用户充分利用AngusTester的服务管理功能，提高工作效率和服务的稳定性。

## 一、服务信息

在AngusTester中，每个服务包含以下字段信息：

- ID：每个服务的唯一标识符，创建服务后自动分配。
- 项目ID：服务所属项目唯一标识符。
- 名称：服务的名称，用于描述或标识该服务的功能或目的。
- 状态：表示服务当前的开发和发布状态。
    - 未知: 状态未定义或无法确定。
    - 设计中: 服务正在进行设计阶段，功能和架构正在规划中。
    - 开发中: 服务正在进行开发，代码正在编写和测试。
    - 开发完成: 服务的开发工作已完成，可能正在进行最终测试。
    - 已发布: 服务已经完成并对外发布，用户可以使用。
- 来源：表示服务的创建源，说明服务是如何产生的。
    - 创建: 通过手动创建服务而生成。
    - 编辑器: 使用某个编辑工具创建或修改的服务。
    - 导入: 从外部文件或系统导入的服务。
    - 同步: 与其他系统或服务同步后生成的服务。
- 导入来源：具体指明服务是通过何种方式导入。
    - OpenAPI: 通过OpenAPI规范文档导入服务，通常用于描述RESTful API。
    - Postman: 从Postman工具中导入的API定义。
    - Angus: AngusTester格式导入的服务。
- 是否授权控制：指示该服务是否受到授权控制，影响访问权限。
- 创建人：创建该服务的用户。
- 创建时间：创建服务的时间。
- 最后修改人：最后修改该服务的用户。
- 最后修改时间：最后一次修改服务的时间。

## 二、服务操作

### 1、添加服务

在系统中添加新的服务，以便后续的API组织和管理。

操作步骤：

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 点击左侧服务列表上方“添加服务”按钮。
3. 在输入框里填写服务名称。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-add.png?fid=251751417168003433&fpt=n6H5RdVEwHJE4zm8styYYAU0dOEnYio7j6m4RlB7)
4. 鼠标点击其他空白区域失焦后会自动保存。

***注意事项：***

- 确保服务名称唯一，避免与现有服务冲突。

### 2、重命名服务

修改现有服务的名称。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“重命名”按钮。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-rename.png?fid=251751417168003447&fpt=dsUpnBOQO9fYfuHslYQ2l14i3N9ADUJYAKjiiAaS)
3. 修改服务名称。
4. 鼠标点击其他空白区域失焦后会自动保存。

### 3、导入服务

将外部接口文件导入到已存在的服务。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“本地导入”按钮。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/apis-import-new-step1.png?fid=251751417168003349&fpt=h1F3R1sQFvSw6ThfruIsfVPZWFv2BX0bJxW9aABT)
3. 在弹窗中选择导入来源、上传接口文件、选择导入相关策略。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/apis-import-new-step2.png?fid=251751417168003351&fpt=YSYWgdR1vbXpi1GGjhB4YZ6V8ToEHzMOnUzB2tGF)
4. 点击“确定”完成导入，系统会将文件中接口自动导入到当前服务，可以在右侧接口列表查看导入接口。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/apis-import-new-step3.png?fid=251751417168003353&fpt=zvUIQmX13u8n44E7lpgWacdUD2GlHUhuKkewl1wr)

### 4、导出服务

将当前服务导出成外部文件，用于迁移或者备份。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“导出接口”按钮。
3. 在弹窗中选择导出文件格式、导出接口。
4. 点击“确定”完成导出，系统会将接口文件下载到本地。

### 5、删除服务

删除不在需要的服务。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“删除”按钮。
3. 系统会要求确认删除操作，确认后服务将被移除。

***注意事项：***

- 如果需要找回服务，可以在接口回收站找回。
- 清除回收站服务会彻底删除，同时除了测试“任务”之外的所有关联资源也会彻底被删除。

### 6、克隆服务

用于快速复制现有服务和接口以创建新服务。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“克隆”按钮。
3. 点击克隆后，系统会自动克隆服务及服务下接口到新的服务。

### 7、修改状态

修改服务当前的开发和发布状态。支持的状态：

- 未知: 状态未定义或无法确定。
- 设计中: 服务正在进行设计阶段，功能和架构正在规划中。
- 开发中: 服务正在进行开发，代码正在编写和测试。
- 开发完成: 服务的开发工作已完成，可能正在进行最终测试。
- 已发布: 服务已经完成并对外发布，用户可以使用。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“修改状态”按钮。
3. 选择新的状态并确认。
4. 点击“确定”以应用更改。

***注意事项：***

- 如果服务开启权限控制，修改成发布状态需要授权当前操作人“发布”权限。

### 8、批量修改接口参数

允许用户一次性修改多个接口的参数设置，支持批量修改的操作与参数包括：添加参数、修改参数、删除参数、启用参数、禁用参数、修改认证、修改服务器、引用变量、取消变量引用、引用数据集、取消数据集引用。

以下介绍“批量修改接口认证头，为认证头参数设置变量值`Bearer {accessToken}`，然后批量为接口关联引用变量”具体操作步骤：

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“批量修改参数”->“批量修改认证”按钮。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-batch-auth.png?fid=251751417168003437&fpt=XmoKdx2H221JtMLakpzBXnC2rWqRFVcg2bEdCAiT)
3. 在弹窗里修改认证头为Bearer认证，设置值中访问令牌为变量，修改完点击“确认”完成修改，系统会修改到当前服务所有接口。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-batch-auth-view.png?fid=251751417168003435&fpt=DgkXT9dynOrZ3qfWsFWzFKv0ifsLX9MSq1821GY8)
4. 在服务列表中右键点击服务名，再点击操作列表“批量修改参数”->“批量引用变量”按钮。
5. 在弹窗里选择引用变量，点击“确认”完成修改，系统会修改到当前服务所有接口。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-variable-ref.png?fid=251751417168003459&fpt=yE9JitZd1JhCaL62Tc1kHtR2LDdchruDRkVNsK1Z)

### 9、生成接口测试脚本

根据接口定义生成服务下所有接口测试脚本，生成脚本前确保接口调试通过。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“接口测试脚本”->“生成测试脚本”按钮。
3. 在弹窗中勾选脚本测试类型、配置脚本执行参数。
4. 点击“确定”生成测试脚本，生成脚本可以在“脚本”中查看。

***注意事项：***

- 如果已存在对应类型测试脚本时会自动忽略，如果需要基于当前接口参数重新生成新的测试脚本，请先删除对应测试类型脚本。
- 接口每种测试类型脚本只允许存在一个。

### 10、删除接口测试脚本

删除服务下所有接口不再需要的测试脚本。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“接口测试脚本”->“删除测试脚本”按钮。
3. 在弹窗中勾选需要删除的脚本测试类型。
4. 点击“确认”完成删除操作。

***注意事项：***

- 删除后不可恢复，请谨慎操作。

### 11、批量启用/禁用测试

批量启动或禁用服务下接口测试。***开启测试后接口测试会被标记为必须的活动，并且测试结果将包含在效能分析中。***

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“启用或禁用接口测试”按钮。
3. 配置测试类型对应启用/禁用状态。
4. 点击“确认”完成修改操作。

### 12、执行服务冒烟测试

执行服务下接口的冒烟测试用例，快速验证服务下接口是否正常工作的测试。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“执行服务测试”->“执行冒烟测试”按钮。
3. 在弹窗中配置接口服务器，如切换环境变量。
4. 点击“确定”按钮，系统会自动生成服务接口冒烟测试脚本，并发起测试。
5. 在“执行”中查看服务接口冒烟测试结果。

***注意事项：***

- 运行冒烟测试用例前需要先生成接口冒烟测试用例，没有冒烟测试用例的接口会被忽略。
- 如果测试服务冒烟测试脚本不存在，将根据接口冒烟测试用例自动生成测试脚本，如果存在则启动对应测试脚本。
- 冒烟测试仅验证基本功能是否正常。

### 13、执行服务安全测试

执行服务下接口的安全测试用例，快速验证服务下接口是否是安全控制的。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“执行服务测试”->“执行安全测试”按钮。
3. 在弹窗中配置接口服务器，如切换环境变量。
4. 点击“确定”按钮，系统会自动生成服务接口安全测试脚本，并发起测试。
5. 在“执行”中查看服务接口安全测试结果。

***注意事项：***

- 运行冒安全测试用例前需要先生成接口安全测试用例，没有安全测试用例的接口会被忽略。
- 如果测试服务安全测试脚本不存在，将根据接口安全测试用例自动生成测试脚本，如果存在则启动对应测试脚本。
- 安全测试仅验证接口是否是安全的。

### 14、执行接口功能测试

运行当前服务下所有开启功能测试的接口功能测试执行，验证接口功能是否符合预期。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“执行接口测试”->“执行功能测试”按钮。
3. 在弹窗中配置接口服务器，如切换环境变量。
4. 点击“确定”按钮，系统会自动生成服务接口功能测试脚本，并发起测试。
5. 在“执行”中查看接口功能测试结果。

注意事项:
- 如果测试脚本不存在，将根据接口自动生成功能测试脚本。

### 15、执行接口稳定性测试

运行当前服务下所有开启稳定性测试的接口稳定性测试执行，验证接口在高负载下的稳定性。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“执行接口测试”->“执行稳定性测试”按钮。
3. 在弹窗中配置接口服务器，如切换环境变量。
4. 点击“确定”按钮，系统会自动生成服务接口稳定性测试脚本，并发起测试。
5. 在“执行”中查看接口稳定性测试结果。

注意事项:
- 如果测试脚本不存在，将根据接口自动生成稳定性测试脚本。

### 16、执行接口性能测试

运行当前服务下所有开启性能测试的接口性能测试执行，测试接口在高负载下的响应时间和吞吐量随并发数变化。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，再点击操作列表“执行接口测试”->“执行性能测试”按钮。
3. 在弹窗中配置接口服务器，如切换环境变量。
4. 点击“确定”按钮，系统会自动生成服务接口性能测试脚本，并发起测试。
5. 在“执行”中查看接口性能测试结果。

注意事项:
- 如果测试脚本不存在，将根据接口自动生成性能测试脚本。

### 17、生成接口测试任务

生成服务下所有接口具体的测试任务，实现接口测试任务跟踪与管理，同时作为效能分析的一部分。

操作步骤:

1. 登录AngusTester后，进入“接口”->“服务”管理界面。
2. 在服务列表中右键点击服务名，点击操作列表“接口测试任务”->“生成测试任务”按钮。
3. 在弹窗里输入所属迭代、测试类型、任务经办人、截止时间等任务信息。
4. 点击“确定”，系统会自动生成对应测试任务，可以在“任务”模块查看和追踪生成的任务。

***注意事项：***

- 生成的任务应与团队的测试计划相符合。

### 18、重新打开接口测试任务

重置打开服务下接口测试任务可以将接口测试任务状态恢复到未开始状态，以便重新配置或分配，***处理次数等指标不会被清除***。

操作步骤：

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击操作列表“接口测试任务”->“重新打开测试任务”按钮。
3. 系统将服务下接口测试任务将更新状态为“待处理”。

***注意事项：***

- 重新打开后，任务相关指标和状态不会被重置。
- 仅对状态为结束状态(已完成、已取消)的任务可进行重新打开操作。

### 19、重新开始接口测试任务

重新开始任务将服务下接口测试任务状态更改为“进行中”，并可以继续进行处理，***处理次数等指标会被清除***。

操作步骤：

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击操作列表“接口测试任务”->“重新开始测试任务”按钮。
3. 系统将服务下接口测试任务将更新状态为“待处理”。

***注意事项：***

- 重新开始后，任务相关指标和状态会被重置。
- 仅对状态为结束状态(已完成、已取消)的任务可进行重新开始操作。

### 20、删除接口测试任务

批量移除服务下接口的测试任务。

操作步骤:

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击操作列表“接口测试任务”->“删除测试任务”按钮。
3. 确认删除操作，服务下接口测试任务将被永久移除。

### 21、编辑服务信息

更新服务名称、状态、权限等信息。

操作步骤:

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击服务名称，打开右侧“服务信息”Tab页面。
3. 点击需要修改字段“编辑”按钮进行修改。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-info-edit.png?fid=251751417168003443&fpt=DZn8GHIS6utb3WWGigfDRPoE4fK97xlZRjsjMLCe)
4. 最后保存修改。

### 22、编辑文档信息

更新服务OpenAPI相关接口文档信息。详细参数信息说明请查看：“OpenAPI规范”->[信息对象](https://swagger.io/specification/#info-object)。

操作步骤:

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击服务名称，打开右侧“文档信息”Tab页面。
3. 点击需要修改字段“编辑”按钮进行修改。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-doc-edit.png?fid=251751417168003441&fpt=b3Ig4b79DjOCyyGbxSR7bTMTrDjkMoPu0gQF0A3i)
4. 最后保存修改。

### 23、接口同步配置

同步接口的配置，用于将外部OpenAPI自动导入到当前服务，最多允许添加10个。AngusTester支持添加、编辑、删除、同步和同步所有配置操作选项，下面是编辑同步配置说明。

操作步骤:

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击服务名称，打开右侧“同步配置”Tab页面。
3. 在同步配置列表中，点击需要编辑的执行配置编辑图标按钮。
4. 修改展开的同步配置信息，如同步地址、同步策略、是否开启认证等。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-sync-add.png?fid=251751417168003453&fpt=EDEE1swgP1h5Kfd2verz3zt2CcCVWqrgVIQIZ4C3)
5. 最后保存修改。

### 24、安全方案配置

定义当前服务下所有接口可以使用的安全方案(Authorization)。

操作步骤:

1. 登录AngusTester，进入“接口”->“服务”管理界面。详细参数信息说明请查看：“OpenAPI规范”->[安全模型对象](https://swagger.io/specification/#security-scheme-object)。
2. 在服务列表中找到对应服务，点击服务名称，打开右侧“安全方案配置”Tab页面。
3. 配置安全策略、认证方式、参数等。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-security-schema.png?fid=251751417168003449&fpt=oKRA5UVicIOuUMqUDDlwP69ZlzTA8ol9pIr21wi7)
4. 最后保存修改。
   
### 25、服务器配置

定义当前服务下所有接口可以使用的服务器(Server URL)信息，最多添加50个。也可以在“接口”->“服务器”中查看和定义。

操作步骤:

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击服务名称，打开右侧“服务器配置”Tab页面。
3. 点击“添加服务器”按钮，填写服务器的URL、描述和变量等信息，也可以通过“服务器示例”操作快速插入服务器配置示例。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-server-edit.png?fid=251751417168003451&fpt=Feg2fXEgAB5z5AjpAWl73BUyNJ1tLeZBLxOo5Jp8)
4. 点击“保存”以完成添加。

### 26、查看测试结果

查看服务器下接口执行测试的结果和分析。

操作步骤:

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击服务名称，打开右侧“测试结果”Tab页面，可以看到服务下接口测试情况。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-test-result.png?fid=251751417168003457&fpt=Gs43PADXhQsVa7lKsHcEuLKl5dCIOFvUwPov65bP)

### 27、查看活动

查看服务和服务下接口的活动记录，用于用户操作记录审计。

具体步骤：

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击服务名称，打开右侧“测试结果”Tab页面，可以看到服务和服务下接口操作记录。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-activity.png?fid=251751417168003431&fpt=wJDHgmZzOqTIGWwryoUsSJZJt09Gj6JELkt1UaYb)

### 28、我的请求代理配置

配置用户请求代理，通过设置请求代理，可以绕过跨域限制，使得请求能够成功发送到目标服务器。

有关代理介绍和支持配置方式请查看AngusTester“配置”->“[代理配置]()”。

具体步骤：

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击服务名称，打开右侧“服务代理”Tab页面。
3. 在展开的页面中选择类型、配置代理服务地址。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-proxy-edit.png?fid=251751417168003445&fpt=ilA25qgLr3YsOmJNMhoq0jQKH6vXv47fxdT8pAWk)

***注意事项：***

- 配置后仅对当前用户所有接口请求生效。

### 29、查看标签

查看服务接口标签分类，具体标签定义查看：“OpenAPI规范”->[标签](https://swagger.io/specification/#tag-object)。

具体步骤：

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击服务名称，打开右侧“标签”Tab页面，可以看到定义标签。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-tags-edit.png?fid=251751417168003455&fpt=hnPEAHuWgosIybM3FDmMvfUgIcnRlIgw4sw1DO70)

### 30、编辑组件

定义服务接口可重用的对象组件。组件对象中定义的所有对象都不会对API产生影响，除非它们是从组件对象外部的属性显式引用的。具体组件定义查看：“OpenAPI规范”->[组件对象](https://swagger.io/specification/#components-object)。

具体步骤：

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击服务名称，打开右侧“组件”Tab页面，可以查看和编辑组件信息。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/service-component.png?fid=251751417168003439&fpt=67D5VzLMQ0slAJmmBtYsfGnv2HQ8bgKKZ0ab3qgj)

### 31、生成Mock服务

基于当前服务下接口创建新的Mock服务及对应Mock接口，创建后可以在接口调试时通过Mock接口进行数据或者状态模拟。

具体步骤：

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击服务名称，打开右侧“Mock”Tab页面，选择“生成Mock服务”选项。
3. 点击“生成”配置Mock服务信息。
4. 最后点击“确定”系统会自动创建并运行一个新的Mock服务。

### 32、关联Mock服务

将当前服务与已存在的Mock服务关联，关联后会自动在关联Mock服务中生成对应Mock接口，可以在接口调试时通过Mock接口进行数据或者状态模拟。

具体步骤：

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 在服务列表中找到对应服务，点击服务名称，打开右侧“Mock”Tab页面，选择“关联Mock服务”选项。
3. 选择需要关联的Mock服务。
4. 最后点击“关联”，系统创建当前服务接口的Mock接口，并与选择Mock服务建立关联。
